<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Construction Waste Manager</title>
  <style>
    /* üåå AI Gradient Background */
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #e2e8f0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* üßä Glassmorphism Container */
    .container {
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      width: 90%;
      max-width: 950px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      animation: fadeIn 0.8s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h1 {
      text-align: center;
      background: linear-gradient(to right, #00c6ff, #0072ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 2em;
      margin-bottom: 20px;
      letter-spacing: 1px;
    }

    /* üß† Inputs and Buttons */
    form {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 12px;
      margin-bottom: 20px;
    }

    input, select, textarea {
      padding: 10px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(255, 255, 255, 0.1);
      color: #e2e8f0;
      transition: all 0.3s;
    }

    input:focus, select:focus, textarea:focus {
      border-color: #00c6ff;
      background: rgba(255, 255, 255, 0.15);
      outline: none;
      box-shadow: 0 0 10px rgba(0, 198, 255, 0.3);
    }

    button {
      border: none;
      background: linear-gradient(90deg, #00c6ff, #0072ff);
      color: #fff;
      border-radius: 10px;
      padding: 10px 16px;
      cursor: pointer;
      font-weight: 500;
      transition: 0.3s;
      letter-spacing: 0.5px;
    }

    button:hover {
      background: linear-gradient(90deg, #0072ff, #00c6ff);
      transform: translateY(-1px);
      box-shadow: 0 0 15px rgba(0, 198, 255, 0.5);
    }

    /* ‚öôÔ∏è Filters */
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
      justify-content: space-between;
    }

    /* üìä Summary Card */
    .summary {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 15px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      text-align: center;
    }

    .summary strong {
      color: #00c6ff;
    }

    /* üìã Table */
    table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      overflow: hidden;
    }

    th, td {
      padding: 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      text-align: left;
    }

    th {
      background: rgba(255, 255, 255, 0.1);
      color: #60a5fa;
    }

    tr:hover {
      background: rgba(255, 255, 255, 0.08);
      transition: 0.2s;
    }

    .actions button {
      background: none;
      color: #00c6ff;
      border: none;
      cursor: pointer;
      font-size: 0.9em;
      margin-right: 5px;
    }

    .actions button:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>ü§ñ AI Construction Waste Management</h1>

    <!-- Input Form -->
    <form id="wasteForm">
      <input type="date" id="date" required />
      <input type="text" id="site" placeholder="Site name" required />
      <select id="type">
        <option>Concrete</option>
        <option>Wood</option>
        <option>Metal</option>
        <option>Plastic</option>
        <option>Soil</option>
        <option>Other</option>
      </select>
      <input type="number" id="quantity" placeholder="Quantity" required />
      <select id="unit">
        <option>kg</option>
        <option>ton</option>
        <option>m3</option>
      </select>
      <textarea id="notes" placeholder="Notes (optional)"></textarea>
      <button type="submit">Add Entry</button>
    </form>

    <!-- Filters -->
    <div class="filters">
      <select id="filterSite">
        <option value="All">All Sites</option>
      </select>
      <select id="filterType">
        <option value="All">All Types</option>
        <option>Concrete</option>
        <option>Wood</option>
        <option>Metal</option>
        <option>Plastic</option>
        <option>Soil</option>
        <option>Other</option>
      </select>
      <button id="exportBtn">Export CSV</button>
      <button id="clearBtn" style="background:linear-gradient(90deg,#ff416c,#ff4b2b)">Clear All</button>
    </div>

    <!-- Summary -->
    <div class="summary">
      <strong>Total Waste:</strong> <span id="totalWaste">0</span> (mixed units)
    </div>

    <!-- Table -->
    <table id="wasteTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Site</th>
          <th>Type</th>
          <th>Quantity</th>
          <th>Unit</th>
          <th>Notes</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    const form = document.getElementById('wasteForm');
    const tableBody = document.querySelector('#wasteTable tbody');
    const totalWaste = document.getElementById('totalWaste');
    const filterSite = document.getElementById('filterSite');
    const filterType = document.getElementById('filterType');
    const exportBtn = document.getElementById('exportBtn');
    const clearBtn = document.getElementById('clearBtn');
    let wasteData = JSON.parse(localStorage.getItem('wasteData') || '[]');

    function renderTable() {
      const siteFilter = filterSite.value;
      const typeFilter = filterType.value;
      const filtered = wasteData.filter(e =>
        (siteFilter === 'All' || e.site === siteFilter) &&
        (typeFilter === 'All' || e.type === typeFilter)
      );

      tableBody.innerHTML = '';
      let total = 0;
      filtered.forEach((e, i) => {
        total += parseFloat(e.quantity);
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${e.date}</td>
          <td>${e.site}</td>
          <td>${e.type}</td>
          <td>${e.quantity}</td>
          <td>${e.unit}</td>
          <td>${e.notes || ''}</td>
          <td class='actions'>
            <button onclick='editEntry(${i})'>Edit</button>
            <button style='color:#ff4b2b' onclick='deleteEntry(${i})'>Delete</button>
          </td>`;
        tableBody.appendChild(row);
      });
      totalWaste.textContent = total.toFixed(2);
      updateSiteFilter();
      localStorage.setItem('wasteData', JSON.stringify(wasteData));
    }

    function updateSiteFilter() {
      const sites = [...new Set(wasteData.map(e => e.site))];
      filterSite.innerHTML = '<option value=\"All\">All Sites</option>';
      sites.forEach(s => {
        const opt = document.createElement('option');
        opt.value = s;
        opt.textContent = s;
        filterSite.appendChild(opt);
      });
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const entry = {
        date: document.getElementById('date').value,
        site: document.getElementById('site').value,
        type: document.getElementById('type').value,
        quantity: document.getElementById('quantity').value,
        unit: document.getElementById('unit').value,
        notes: document.getElementById('notes').value
      };
      wasteData.push(entry);
      form.reset();
      renderTable();
    });

    window.editEntry = function(index) {
      const e = wasteData[index];
      document.getElementById('date').value = e.date;
      document.getElementById('site').value = e.site;
      document.getElementById('type').value = e.type;
      document.getElementById('quantity').value = e.quantity;
      document.getElementById('unit').value = e.unit;
      document.getElementById('notes').value = e.notes;
      wasteData.splice(index, 1);
      renderTable();
    };

    window.deleteEntry = function(index) {
      if (confirm('Delete this record?')) {
        wasteData.splice(index, 1);
        renderTable();
      }
    };

    exportBtn.addEventListener('click', () => {
      const csv = ['Date,Site,Type,Quantity,Unit,Notes'];
      wasteData.forEach(e => csv.push(`${e.date},${e.site},${e.type},${e.quantity},${e.unit},${e.notes || ''}`));
      const blob = new Blob([csv.join('\\n')], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'construction_waste_ai.csv';
      a.click();
      URL.revokeObjectURL(url);
    });
    clearBtn.addEventListener('click', () => {
      if (confirm('Clear all records?')) {
        wasteData = [];
        renderTable();
      }
    });

    filterSite.addEventListener('change', renderTable);
    filterType.addEventListener('change', renderTable);
    renderTable();
  </script>
</body>
</html>

